<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拽专-: 注专转 转专   023</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts (Heebo for Hebrew) -->
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f3f4f6;
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .active-tab {
            border-bottom: 3px solid #3b82f6;
            color: #3b82f6;
            font-weight: bold;
        }

        .explanation-box {
            transition: all 0.3s ease-in-out;
        }

        /* Custom scrollbar for better UX */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>

    <!-- Chosen Palette: "Academic Focus" - Slate (Structure), Blue (Primary Action), Emerald (Success), Rose (Error) -->
    <!-- Application Structure Plan: 
         1. Dashboard Header: Context and Progress.
         2. Topic Navigation: Grouping questions by economic logic (Costs, Supply/Demand, Trade, PPF) rather than random order.
         3. Interactive Workspace: 
            - Split view: Question/Data on right, Visualization/Tools on left.
            - "Smart Tables": For cost questions, tables that auto-fill MC/ATC on demand.
            - "Logic Stepper": For theoretical questions, a step-by-step revealer.
         4. Cheatsheet Module: Accessible summaries based on the Strategy Canvas protocols.
    -->
</head>

<body class="text-slate-800">

    <!-- App Container -->
    <div id="app" class="flex flex-col h-screen overflow-hidden">

        <!-- Header -->
        <header class="bg-white shadow-sm z-10 p-4 flex justify-between items-center border-b border-slate-200">
            <div>
                <h1 class="text-2xl font-bold text-slate-800"> 拽专 </h1>
                <p class="text-sm text-slate-500">驻转专  专拽 - 注 23/03/2018</p>
            </div>
            <div class="flex gap-3">
                <button onclick="app.showCheatsheet()"
                    class="bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg text-sm transition font-medium">
                     祝 住转 
                </button>
                <div class="bg-blue-50 text-blue-700 px-4 py-2 rounded-lg text-sm font-bold">
                    砖 <span id="current-q-num">1</span> 转 <span id="total-q-num">20</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="flex flex-1 overflow-hidden">

            <!-- Sidebar Navigation (Topics) -->
            <nav class="w-64 bg-white border-l border-slate-200 overflow-y-auto hidden md:block flex-shrink-0">
                <div class="p-4">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">砖 </h3>
                    <div id="topic-nav" class="space-y-6">
                        <!-- Navigation Items injected by JS -->
                    </div>
                </div>
            </nav>

            <!-- Active Question Workspace -->
            <main class="flex-1 overflow-y-auto p-4 md:p-8 relative">
                <div class="max-w-5xl mx-auto">

                    <!-- Question Card -->
                    <div id="question-container"
                        class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden min-h-[500px]">
                        <!-- Dynamic Content Loaded Here -->
                    </div>

                </div>
            </main>

        </div>
    </div>

    <!-- Cheatsheet Modal -->
    <div id="cheatsheet-modal"
        class="fixed inset-0 bg-slate-900/50 hidden items-center justify-center z-50 backdrop-blur-sm">
        <div class="bg-white w-full max-w-3xl h-[80vh] rounded-2xl shadow-2xl flex flex-col m-4">
            <div class="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 rounded-t-2xl">
                <h2 class="text-xl font-bold text-slate-800"> 专住 住专 (Cheatsheet)</h2>
                <button onclick="app.hideCheatsheet()"
                    class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto prose prose-slate max-w-none" id="cheatsheet-content">
                <!-- Content injected from JS -->
            </div>
        </div>
    </div>

    <!-- Logic Script -->
    <script>
        // --- Data: Exam Content ---
        const examData = [
            {
                id: 15,
                topic: "producer",
                title: "转 爪专 注转 ( 住专)",
                desc: "转 转 注转, 爪转 注转 拽注  注  拽爪专/专.",
                content: `
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <p class="mb-4 text-lg"> 转  爪转 爪专 砖 驻专 ($P=55$):</p>
                            <div class="overflow-x-auto rounded-lg border border-slate-200 mb-4">
                                <table class="w-full text-center text-sm">
                                    <thead class="bg-slate-50 text-slate-600">
                                        <tr>
                                            <th class="p-2 border-b">X (转驻拽)</th>
                                            <th class="p-2 border-b">TC (注转 转)</th>
                                            <th class="p-2 border-b bg-blue-50 text-blue-700">MC (砖转)</th>
                                            <th class="p-2 border-b bg-green-50 text-green-700">VC (砖转)</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr><td>1</td><td>160</td><td class="font-mono text-blue-600">--</td><td class="font-mono text-green-600">--</td></tr>
                                        <tr><td>2</td><td>205</td><td class="font-mono text-blue-600">45</td><td class="font-mono text-green-600">--</td></tr>
                                        <tr><td>3</td><td>250</td><td class="font-mono text-blue-600">45</td><td class="font-mono text-green-600">--</td></tr>
                                        <tr><td>4</td><td>310</td><td class="font-mono text-blue-600">60</td><td class="font-mono text-green-600">--</td></tr>
                                        <tr><td>5</td><td>385</td><td class="font-mono text-blue-600">75</td><td class="font-mono text-green-600">--</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="text-sm text-slate-500 mb-4">* 抓 注 "砖 转 住专"  砖祝 转 注转 住转专转.</p>
                            <button onclick="app.revealTableData(15)" class="mb-6 w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition font-bold">М 砖 转 住专 (MC, VC, FC)</button>
                        </div>
                        <div class="flex flex-col justify-center">
                            <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                                <h4 class="font-bold mb-2">住专转 驻转专:</h4>
                                <ul class="list-disc list-inside space-y-2 text-sm text-slate-700">
                                    <li><strong>砖 1:</strong> 砖 MC 驻专砖  TC.</li>
                                    <li><strong>砖 2:</strong>  驻 专 (55)  -MC.</li>
                                    <li><strong>砖 3:</strong> 砖 FC 驻 住 $TC - VC$.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `,
                options: [
                    ".  FC=50  爪专 6  拽爪专 驻住拽 专.",
                    ".  FC=90  爪专 3  拽爪专 驻住拽 专.",
                    ".  FC=100  爪专 5  拽爪专  专.",
                    ".  FC=60  爪专 3 拽爪专  驻住拽 专."
                ],
                correct: 1, // Index 1 is option B
                explanation: `
                    <strong>转 :</strong><br>
                    1. <strong>砖 转:</strong> -3 转 MC=45 (< 55). -4 转 MC=60 (> 55).  爪专 3 转.<br>
                    2. <strong>转 -3 转:</strong> TC=250. 驻 (TR) = $3 \\times 55 = 165$.<br>
                    3. <strong>拽转 驻爪 ' (FC=90):</strong><br>
                       - VC = 250 - 90 = 160.<br>
                       -  拽爪专: $TR (165) > VC (160)$ -> <strong>爪专</strong>.<br>
                       -  专: $TR (165) < TC (250)$ -> <strong>驻住拽</strong>.<br>
                     注 ' .
                `
            },
            {
                id: 2,
                topic: "market",
                title: "转注专转 砖转转: 住 专",
                desc: "转 砖驻注转 住  注 砖 砖拽 专 专转转.",
                content: `
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <div class="mb-2 font-mono text-sm bg-slate-100 p-2 rounded">
                                拽砖: P = 100 - 0.5X<br>
                                爪注: P = 20 + 0.5X
                            </div>
                            <p class="mb-4 text-slate-600">砖  住 砖 4 砖拽  注 爪专.</p>
                            
                            <div class="chart-container bg-white rounded-lg border border-slate-100 p-2">
                                <canvas id="chart-q2"></canvas>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <h4 class="font-bold text-yellow-800 mb-1">驻专拽 住:</h4>
                                <p class="text-sm text-yellow-700">住 "专" 转 注拽转 爪注 转 注. 砖 砖: $P = (20 + 0.5X) + 4$.</p>
                            </div>
                            <button onclick="app.updateChartQ2()" class="w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition font-bold"> 住祝 转 住 专祝</button>
                        </div>
                    </div>
                `,
                options: [
                    ". 专 转 转拽 -8 砖\".",
                    ". 专 砖   专 拽专 -4 砖\".",
                    ". 转 转.",
                    ". 爪专 砖 转  住."
                ],
                correct: 0,
                explanation: `
                    <strong>砖  专 (DWL):</strong><br>
                    1. <strong>砖 砖拽 拽专:</strong> $100-0.5X = 20+0.5X \\rightarrow X=80, P=60$.<br>
                    2. <strong>砖 砖拽 砖:</strong> $100-0.5X = 24+0.5X \\rightarrow X=76$.<br>
                    3. <strong>砖 砖砖:</strong> $\\text{DWL} = 0.5 \\times \\text{Tax} \\times \\Delta X$.<br>
                    $\\text{DWL} = 0.5 \\times 4 \\times (80-76) = 0.5 \\times 4 \\times 4 = 8$.<br>
                    专 拽 拽 -8 砖".
                `
            },
            {
                id: 13,
                topic: "ppf",
                title: "注拽转 转专: 砖驻专  注拽",
                desc: "砖  砖 爪专 ()  砖 爪专 (注拽).",
                content: `
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="chart-container">
                            <canvas id="chart-q13"></canvas>
                        </div>
                        <div class="flex flex-col justify-center space-y-4">
                            <div class="bg-white p-4 rounded shadow-sm border border-slate-200">
                                <h4 class="font-bold">转 砖:</h4>
                                <ul class="list-disc list-inside text-sm mt-2">
                                    <li>爪专 专爪 <strong>拽</strong> 100 转 X.</li>
                                    <li> 砖驻专  -X.</li>
                                    <li>转拽 注拽 砖 100 转 Y.</li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 p-4 rounded border border-blue-100">
                                <h4 class="font-bold text-blue-800">砖 专转:</h4>
                                <p class="text-sm text-blue-700"> 转 爪专转 Y? (拽 -100  转专?)</p>
                            </div>
                        </div>
                    </div>
                `,
                options: [
                    ". 爪专 砖 Y 转 拽 -100.",
                    ". 注转 专转 砖转 砖 Y 转拽.",
                    ". 注转 爪注转 转  -100.",
                    ".  转砖转 专转  转."
                ],
                correct: 3, // Option E
                explanation: `
                    <strong>住专 "住驻专":</strong><br>
                    1. <strong>砖专专 砖:</strong>  砖-X 砖转驻专 转  转 专砖转 拽注 (100), 转驻 注.<br>
                    2. <strong>爪专 拽:</strong> 注 注专 爪专 Y -> 爪专 Y 注.<br>
                    3. <strong>注拽:</strong> 住祝, 拽 100 Y.<br>
                    4. <strong>住":</strong> 爪专  -( 爪专 + 100).   <strong>转专</strong> -100.<br>
                    5. <strong>注转 砖转:</strong> 砖驻专 -X 驻 转 转专 注 拽专 转专,  注转 Y <strong>注</strong>.
                `
            },
            {
                id: 17,
                topic: "producer",
                title: "爪注 爪专驻: 专 驻注",
                desc: "砖 爪注 注驻 砖 200 驻注 住 砖.",
                content: `
                    <div class="space-y-4">
                        <p>砖拽 100 驻注 住 ' -100 驻注 住 '. 专 砖拽 $P=8$.</p>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-red-50 p-3 rounded border border-red-100">
                                <h5 class="font-bold text-red-800">驻注 ' (注转 砖转)</h5>
                                <ul class="mt-1 space-y-1">
                                    <li>1 ': 10 砖"</li>
                                    <li>2 ': 18 砖"</li>
                                    <li>3 ': 24 砖"</li>
                                    <li>4 ': 31 砖"</li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 p-3 rounded border border-blue-100">
                                <h5 class="font-bold text-blue-800">驻注 ' (注转 砖转)</h5>
                                <ul class="mt-1 space-y-1">
                                    <li>1 ': 7 砖"</li>
                                    <li>2 ': 12 砖"</li>
                                    <li>3 ': 19 砖"</li>
                                    <li>4 ': 36 砖"</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `,
                options: [
                    ". 400 转.",
                    ". 300 转.",
                    ". 700 转.",
                    ". 200 转."
                ],
                correct: 2, // Option C (700)
                explanation: `
                    <strong>转 转 驻转:</strong><br>
                    1. <strong>驻注 ':</strong> -4 转, 注转 砖转 31, 驻 $4\\times8=32$. 专 转驻注  (1). 爪专 4. 住": $100 \\times 4 = 400$.<br>
                    2. <strong>驻注 ':</strong> -3 转 MC=7 ($19-12$). -4 转 MC=17. 注爪专 -3. 住": $100 \\times 3 = 300$.<br>
                    3. <strong>住" 注驻:</strong> $400 + 300 = 700$.
                `
            }
        ];

        const cheatsheetData = `
            <h3> 砖拽 专 爪专 (拽专拽注/注)</h3>
            <p>砖专 专 爪专  砖砖 砖 爪专:</p>
            <ul>
                <li><strong>注 拽砖 爪专 ':</strong> 注 转 专 专 爪专.</li>
                <li><strong>转爪:</strong> 注转 爪专 砖 爪专 ' 注转 -> 爪注 砖 ' 专 -> 专 ' 注.</li>
            </ul>
            <hr>
            <h3> 转 爪专</h3>
            <ul>
                <li><strong> 拽爪专:</strong> 爪专  $P \\ge AVC_{min}$.</li>
                <li><strong>转:</strong> 拽 砖 $P = MC$ ( 注 $MC$ 注).</li>
                <li><strong>专拽 :</strong>  $MC$  注 转, 拽 专 转驻注  转 ($TR - VC$).</li>
            </ul>
            <hr>
            <h3> 住专 </h3>
            <ul>
                <li><strong>住 (Tariff):</strong> 注 转 专 拽 注 专 注.  拽, 爪专 拽 .</li>
                <li><strong>爪:</strong> 转拽 砖专 注  专 拽 砖 砖拽 住专.</li>
            </ul>
        `;

        // --- Application Logic ---

        const app = {
            state: {
                currentQuestionIndex: 0,
                questions: examData
            },

            init: function () {
                this.renderNav();
                this.loadQuestion(0);
                document.getElementById('cheatsheet-content').innerHTML = cheatsheetData;
            },

            renderNav: function () {
                const navContainer = document.getElementById('topic-nav');
                const topics = {
                    'producer': '转专转 爪专 注转',
                    'market': '砖 砖拽 转注专转',
                    'ppf': '注拽转 转专',
                    'trade': '住专 '
                };

                // Group questions by topic
                const grouped = {};
                this.state.questions.forEach((q, index) => {
                    if (!grouped[q.topic]) grouped[q.topic] = [];
                    grouped[q.topic].push({ ...q, globalIndex: index });
                });

                let html = '';
                for (const [key, label] of Object.entries(topics)) {
                    if (grouped[key]) {
                        html += `<div class="mb-4">
                            <h4 class="font-bold text-slate-700 text-sm mb-2">${label}</h4>
                            <div class="space-y-1">`;
                        grouped[key].forEach(q => {
                            html += `
                                <button onclick="app.loadQuestion(${q.globalIndex})" 
                                    class="w-full text-right px-3 py-2 text-sm rounded hover:bg-slate-50 text-slate-600 transition ${q.globalIndex === 0 ? 'bg-blue-50 text-blue-700 font-bold' : ''}"
                                    id="nav-btn-${q.globalIndex}">
                                    砖 ${q.id}
                                </button>`;
                        });
                        html += `</div></div>`;
                    }
                }
                navContainer.innerHTML = html;
            },

            loadQuestion: function (index) {
                this.state.currentQuestionIndex = index;
                const q = this.state.questions[index];

                // Update UI Header
                document.getElementById('current-q-num').innerText = index + 1;
                document.getElementById('total-q-num').innerText = this.state.questions.length;

                // Update Nav Active State
                document.querySelectorAll('#topic-nav button').forEach(b => {
                    b.classList.remove('bg-blue-50', 'text-blue-700', 'font-bold');
                    b.classList.add('text-slate-600');
                });
                const activeBtn = document.getElementById(`nav-btn-${index}`);
                if (activeBtn) activeBtn.classList.add('bg-blue-50', 'text-blue-700', 'font-bold');

                // Render Question Content
                const container = document.getElementById('question-container');
                container.innerHTML = `
                    <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                        <h2 class="text-xl font-bold text-slate-800">砖 ${q.id}: ${q.title}</h2>
                        <span class="text-xs font-bold uppercase px-2 py-1 bg-white rounded border border-slate-200 text-slate-500 tracking-wide">${q.topic}</span>
                    </div>
                    <div class="p-6 md:p-8">
                        <div class="prose prose-slate max-w-none mb-8">
                            ${q.content}
                        </div>
                        
                        <div class="grid gap-3 max-w-2xl">
                            ${q.options.map((opt, i) => `
                                <button onclick="app.checkAnswer(${i})" 
                                    id="opt-${i}"
                                    class="text-right p-4 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition flex items-center group">
                                    <div class="w-6 h-6 rounded-full border-2 border-slate-300 mr-4 group-hover:border-blue-500 flex items-center justify-center text-xs ml-3">
                                        ${["", "", "", "", ""][i]}
                                    </div>
                                    <span class="font-medium text-slate-700">${opt}</span>
                                </button>
                            `).join('')}
                        </div>

                        <div id="feedback-area" class="mt-8 hidden p-6 rounded-xl bg-slate-50 border border-slate-200">
                            <!-- Feedback injected here -->
                        </div>
                    </div>
                `;

                // Initialize Charts if needed
                if (q.id === 2) this.initChartQ2();
                if (q.id === 13) this.initChartQ13();
            },

            checkAnswer: function (selectedIndex) {
                const q = this.state.questions[this.state.currentQuestionIndex];
                const feedbackEl = document.getElementById('feedback-area');
                const isCorrect = selectedIndex === q.correct;

                // UI Updates for Options
                q.options.forEach((_, i) => {
                    const el = document.getElementById(`opt-${i}`);
                    el.classList.remove('hover:bg-blue-50', 'hover:border-blue-300', 'border-slate-200');
                    if (i === q.correct) {
                        el.classList.add('bg-emerald-50', 'border-emerald-500', 'text-emerald-900');
                    } else if (i === selectedIndex && !isCorrect) {
                        el.classList.add('bg-rose-50', 'border-rose-500', 'text-rose-900');
                    } else {
                        el.classList.add('border-slate-100', 'opacity-50');
                    }
                });

                // Show Feedback
                feedbackEl.classList.remove('hidden');
                feedbackEl.innerHTML = `
                    <div class="flex items-start gap-4">
                        <div class="text-3xl">${isCorrect ? '' : ''}</div>
                        <div>
                            <h4 class="font-bold text-lg mb-2 ${isCorrect ? 'text-emerald-700' : 'text-slate-700'}">
                                ${isCorrect ? ' ! 转砖 .' : ' 拽.   :'}
                            </h4>
                            <div class="text-slate-600 leading-relaxed">
                                ${q.explanation}
                            </div>
                        </div>
                    </div>
                `;
            },

            // --- Specific Logic for Interactive Questions ---

            revealTableData: function (id) {
                if (id === 15) {
                    const rows = document.querySelectorAll('tbody tr');
                    // Data: VC = TC - FC (assuming FC=90 from option B logic for demo, or calculating diffs)
                    // For logic consistency with "Answer B", let's assume we show the derived MC/VC
                    const data = [
                        { mc: "-", vc: "70" }, // 160-90
                        { mc: "45", vc: "115" }, // 205-90
                        { mc: "45", vc: "160" }, // 250-90
                        { mc: "60", vc: "220" }, // 310-90
                        { mc: "75", vc: "295" }  // 385-90
                    ];

                    rows.forEach((row, i) => {
                        row.cells[2].innerText = data[i].mc;
                        row.cells[3].innerText = data[i].vc;
                        row.cells[2].classList.add('bg-blue-100', 'font-bold');
                        row.cells[3].classList.add('bg-green-100', 'font-bold');
                    });
                }
            },

            // --- Chart Logic ---
            chartInstance: null,

            initChartQ2: function () {
                const ctx = document.getElementById('chart-q2').getContext('2d');
                // Q2: P = 20 + 0.5X (Supply), P = 100 - 0.5X (Demand)
                // Equilibrium: 80, 60

                const demandData = [];
                const supplyData = [];
                const supplyTaxData = [];

                for (let x = 0; x <= 120; x += 10) {
                    demandData.push({ x: x, y: 100 - 0.5 * x });
                    supplyData.push({ x: x, y: 20 + 0.5 * x });
                    supplyTaxData.push({ x: x, y: 24 + 0.5 * x }); // Tax = 4
                }

                if (this.chartInstance) this.chartInstance.destroy();

                this.chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [
                            { label: '拽砖 (D)', data: demandData, borderColor: '#64748b', borderWidth: 2, pointRadius: 0 },
                            { label: '爪注 拽专 (S0)', data: supplyData, borderColor: '#3b82f6', borderWidth: 2, pointRadius: 0 },
                            { label: '爪注 注 住 (S1)', data: supplyTaxData, borderColor: '#ef4444', borderWidth: 2, borderDash: [5, 5], hidden: true, pointRadius: 0 }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { type: 'linear', position: 'bottom', title: { display: true, text: '转 (X)' } },
                            y: { title: { display: true, text: '专 (P)' }, min: 0, max: 100 }
                        },
                        plugins: { legend: { position: 'bottom' } }
                    }
                });
            },

            updateChartQ2: function () {
                if (this.chartInstance) {
                    this.chartInstance.data.datasets[2].hidden = false;
                    this.chartInstance.update();
                }
            },

            initChartQ13: function () {
                const ctx = document.getElementById('chart-q13').getContext('2d');
                // Q13: PPF. Original intersects at 200 (X) and 300 (Y).
                // Tech shift in X: Moves X intercept to right. Grant: Moves everything up.

                // Simplified curve simulation
                const originalPPF = [];
                const techPPF = [];
                const grantPPF = [];

                for (let y = 0; y <= 300; y += 10) {
                    // Ellipse approximate x = 200 * sqrt(1 - (y/300)^2)
                    let x = 200 * Math.sqrt(1 - Math.pow(y / 300, 2));
                    originalPPF.push({ x: x, y: y });
                }

                // Tech Shift (X improves -> X max becomes 300)
                for (let y = 0; y <= 300; y += 10) {
                    let x = 300 * Math.sqrt(1 - Math.pow(y / 300, 2));
                    techPPF.push({ x: x, y: y });
                }

                if (this.chartInstance) this.chartInstance.destroy();

                this.chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [
                            { label: '爪 爪', data: originalPPF, borderColor: '#64748b', borderWidth: 2, pointRadius: 0 },
                            { label: '专 砖驻专 -X', data: techPPF, borderColor: '#3b82f6', borderWidth: 2, borderDash: [5, 5], pointRadius: 0 }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { type: 'linear', position: 'bottom', title: { display: true, text: '爪专 X' } },
                            y: { title: { display: true, text: '爪专 Y' } }
                        }
                    }
                });
            },

            showCheatsheet: function () { document.getElementById('cheatsheet-modal').classList.remove('hidden'); document.getElementById('cheatsheet-modal').classList.add('flex'); },
            hideCheatsheet: function () { document.getElementById('cheatsheet-modal').classList.add('hidden'); document.getElementById('cheatsheet-modal').classList.remove('flex'); }
        };

        // Start App
        app.init();

    </script>

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- Visualization & Content Choices: 
         Q15: Dynamic Table -> Goal: Show calculation flow (MC/VC) -> Interaction: Reveal button -> Chart.js not suitable for table logic.
         Q2: Line Chart -> Goal: Visualizing Tax Shift -> Interaction: "Add Tax" button -> Chart.js.
         Q13: PPF Curve -> Goal: Comparing curves -> Interaction: None (static view initially) -> Chart.js.
         Logic: Vanilla JS state management for navigation and scoring.
    -->
</body>

</html>